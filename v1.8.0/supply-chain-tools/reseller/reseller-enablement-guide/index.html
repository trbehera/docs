<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Secure Device Onboard Contributers">
        <link rel="canonical" href="https://secure-device-onboard.github.io/docs/supply-chain-tools/reseller/reseller-enablement-guide/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Reseller Tools - Secure Device Onboard</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Secure Device Onboard</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../reference/" class="nav-link">Reference</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../community/" class="nav-link">Community</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../releases/" class="nav-link">Releases</a>
                            </li>
                            <li class="navitem">
                                <a href="../../../security-best-practices/security-best-practices/" class="nav-link">Security Best Practices</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Client SDK <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../client-sdk/client-sdk-reference-guide/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../client-sdk/client-sdk-api-reference/" class="dropdown-item">API Reference</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">IOT Platform SDK <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../iot-platform-sdk/introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../iot-platform-sdk/running-the-demo/" class="dropdown-item">Running The Demo</a>
</li>
                                    
<li>
    <a href="../../../iot-platform-sdk/development-guide/" class="dropdown-item">Development Guide</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Rendezvous Service <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../rendezvous-service/introduction/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Supply Chain Tools <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../manufacturing/manufacturer-enablement-guide/" class="dropdown-item">Manufacturing Tools</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Reseller Tools</a>
</li>
                                    
<li>
    <a href="../../keystore-guide/" class="dropdown-item">Keystore Guide</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Protocol Reference Implementation <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../protocol-reference-implementation/introduction/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">All-in-one Demo <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../all-in-one-demo/introduction/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Protocol Specification <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../protocol-specification/introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/protocol-description/" class="dropdown-item">Protocol Description</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/protocol-data-types/" class="dropdown-item">Protocol Data Types</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/data-transmission-persistence/" class="dropdown-item">Data Transmission & Persistence</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/detailed-protocol-description/" class="dropdown-item">Detailed Protocol Description</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/resale-protocol/" class="dropdown-item">Resale Protocol</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/credential-reuse-protocol/" class="dropdown-item">Credential Reuse Protocol</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/appendix-b-device-provisioning-with-ecdsa/" class="dropdown-item">Appendix B - Device Provisioning with ECDSA</a>
</li>
                                    
<li>
    <a href="../../../protocol-specification/appendix-c-secure-device-onboard-1-1-crypto-upgrade/" class="dropdown-item">Appendix C - Secure Device Onboard 1.1 Crypto Upgrade</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../manufacturing/manufacturer-enablement-guide/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../keystore-guide/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#evaluation-deployment" class="nav-link">Evaluation Deployment</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#production-deployment" class="nav-link">Production Deployment</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#database-and-toolkit-installation" class="nav-link">Database and Toolkit Installation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#usage-scenarios" class="nav-link">Usage Scenarios</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Secure Device Onboard (SDO) enhances the out-of-the-box setup and provisioning experience for connected IoT devices.  </p>
<p>The SDO reseller toolkit addresses the needs of resellers, manufacturers, and others in the supply chain to transfer ownership of SDO devices.  </p>
<p>To learn more about SDO, see the <a href="#overview">Overview</a>. </p>
<h3 id="terminology">Terminology<a class="headerlink" href="#terminology" title="Permanent link">&para;</a></h3>
<p>Refer to the <a href="../../../reference/">Secure Device Onboard Reference page</a>.</p>
<h3 id="related-documents">Related Documents<a class="headerlink" href="#related-documents" title="Permanent link">&para;</a></h3>
<p>Your role as a supply chain integrator is combined with solutions implemented by manufacturers and device management service providers to enable a complete end-to-end experience. Refer to the <a href="../../../reference/">Secure Device Onboard Reference page</a>.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>As an Secure Device Onboard (SDO)-enabled device progresses through the supply chain, associated with the device are SDO ownership vouchers. Ownership vouchers are electronic documents that are ultimately used by the end recipient of the device to prove ownership. For SDO to function properly, it is important that these vouchers are extended from each entity to the next in the supply chain.
As a member of the supply chain, you are responsible for extending ownership vouchers to the next owner when devices are ordered or transferred. Extending ownership vouchers entails the following:  </p>
<ol>
<li>If you have purchased SDO-enabled devices, receiving a list of ownership vouchers from the previous owner (such as a manufacturer or other reseller/distributor). This can be done via email, a flat file, or an established B2B process to synchronize orders and associated ownership voucher data.  </li>
<li>Importing received ownership vouchers from devices you purchase into the SDO Database.  </li>
<li>Receiving public keys from device purchasers. This is to establish trust of the ownership voucher before it is transmitted or accessed. This receipt operation should be incorporated into your e-commerce flow so public keys are included as part of the device ordering process.  </li>
<li>Extending ownership vouchers based on customer public keys – once a public key from a customer is known and an order is fulfilled, the devices’ associated ownership vouchers are extended to the customer. The resulting vouchers are exported and transmitted to the customer, usually in conjunction with an advanced shipping notice (ASN).  </li>
</ol>
<p>To enable support for SDO, the Secure Device Onboard project provides the following:  </p>
<ul>
<li>A reseller toolkit to perform ownership voucher extension.  </li>
<li>SDO database to store customer public keys and vouchers received from suppliers (The project provides the definition for all the database artifacts while the reseller is responsible for providing the actual database instance).  </li>
</ul>
<p>The following diagram shows the interfaces between the SDO database, reseller toolkit, business systems, suppliers, and customers.</p>
<p><img alt="Interfaces between the SDO Database, Reseller Toolkit, Business Systems, Suppliers, and Customers" src="../img/Slide3.PNG" /></p>
<h2 id="evaluation-deployment">Evaluation Deployment<a class="headerlink" href="#evaluation-deployment" title="Permanent link">&para;</a></h2>
<p>The evaluation deployment is useful for development, test, and enabling purposes. The evaluation deployment can fully initialize a device to the same extent as the production deployment but does not require any integration with business systems nor the setup of a secure key fob.  </p>
<h3 id="step-1-prepare-hardware-infrastructure">Step 1: Prepare Hardware Infrastructure<a class="headerlink" href="#step-1-prepare-hardware-infrastructure" title="Permanent link">&para;</a></h3>
<p>You need to have one machine that can run the reseller toolkit as well as host the Secure Device Onboard (SDO) database. A non-production environment has minimal requirements; the machine can run either the Linux* OS (version 18.04) or Windows* 10 OS.  </p>
<h3 id="step-2-deploy-database-and-toolkit">Step 2: Deploy Database and Toolkit<a class="headerlink" href="#step-2-deploy-database-and-toolkit" title="Permanent link">&para;</a></h3>
<p>Install the SDO database and toolkit, see <a href="#database-and-toolkit-installation">Database and Toolkit Installation</a>. It is recommended to choose the key store file option unless there is a specified need to test with a secure key fob. </p>
<h2 id="production-deployment">Production Deployment<a class="headerlink" href="#production-deployment" title="Permanent link">&para;</a></h2>
<h3 id="step-1-modify-business-system-processes">Step 1: Modify business system processes<a class="headerlink" href="#step-1-modify-business-system-processes" title="Permanent link">&para;</a></h3>
<p>Your business system processes need to:  </p>
<ul>
<li>
<p>Manage receipt of ownership vouchers from suppliers and the ownership voucher storage in the SDO Database.  </p>
<p>When physical devices are received from your supplier, you should also receive the ownership vouchers. Typically, these are through an electronic communication channel. Each of these vouchers must be inserted in the SDO Database so they can be available for voucher extension (assignment to one of your customers). See <a href="#import-ownership-voucher">Import Ownership Voucher</a> for details.</p>
</li>
<li>
<p>Manage SDO public key(s) from customers, and the public key(s) storage in the SDO database.  </p>
<p>SDO requires the customer’s SDO public key. Your customer interactions and processes must be modified as required to support this receipt of their public key and then to import this key into the SDO Database. See <a href="#import-customer-public-key">Import Customer Public Key</a>.  </p>
<p>Whether this key is delivered with each order or done before separately depends on your processes and interaction with your customers.</p>
</li>
<li>
<p>Provide your SDO public key to your suppliers.  </p>
<p>During the initial setup of the reseller toolkit, you will create a key pair (if you support a device with multiple cryptography standards, you will have more than one key pair). This key pair needs to be provided to your suppliers. The key pair needs only be supplied once or be supplied with each order. The details would be determined by you and your suppliers.  </p>
</li>
<li>
<p>Manage ownership vouchers sent to customers.</p>
<p>After a device is initialized with SDO, an initial ownership voucher is produced and stored in the SDO Database. This voucher must first be “signed” to a customer before sending to the customer.</p>
</li>
</ul>
<p>The ownership voucher management task has the following two steps:  </p>
<ol>
<li>Assign a voucher (device) to a customer (technically, a customer public key) See <a href="#assign-device-voucher-to-customer">Assign Device (Voucher) to Customer</a>.  </li>
<li>Perform voucher extension. The resulting extended voucher can then be sent to the customer.  </li>
</ol>
<p>The following are the implied requirements:  </p>
<ol>
<li>It is assumed that you already have some way to track which device was shipped with which order. Most likely, this was done with serial numbers. With SDO, there is an additional requirement that you must match voucher(s) with physical devices such that the voucher(s) delivered to the customer are those that correspond to the actual physical devices that are delivered.</li>
<li>You need to update or modify the existing B2B channel to include an ownership voucher for each physical device delivered to the customer. Typically, these vouchers would be linked to the order in a particular way, but the details will vary for each reseller or distributor.</li>
<li>If a customer loses one of these vouchers and requires a replacement, then you must re-generate this voucher or retrieve the voucher from the device or order data if you choose to store the extended voucher with the device or order data.
The following figure shows a typical usage scenario of various sequences involved in supporting SDO-enabled devices. The order and timing of each sequence may vary with your ordering and inventory management processes. The only firm requirement is that Seq 1 happens before Seq 2, and Seq 2 and 3 happen before Seq 4.</li>
</ol>
<p><img alt="A Typical Usage Scenario of Various Sequences Involved in Supporting SDO-Enabled Devices" src="../img/Slide4.PNG" /></p>
<h4 id="step-11-device-serial-no">Step 1.1: Device Serial No<a class="headerlink" href="#step-11-device-serial-no" title="Permanent link">&para;</a></h4>
<p>SDO requires the correct ownership voucher to be delivered with each physical device. Therefore, an identifier that is present on the physical device, for example the serial number, can be used.
Scanning an identifier on the physical device allows for the correct voucher to be selected (if an incorrect voucher is delivered, SDO will fail later in the supply chain when run). If, for example, the serial number is already known, the correct physical device can be selected.
In practice, the device serial number is used as the identifier. The vouchers you receive from your suppliers will include this “index” value along with each voucher.</p>
<h4 id="step-12-customer-descriptor">Step 1.2: Customer Descriptor<a class="headerlink" href="#step-12-customer-descriptor" title="Permanent link">&para;</a></h4>
<p>A customer descriptor is used when importing customer public keys and assigning a voucher to a customer. This descriptor is a string value that must uniquely identify the customer. It is up to you, the reseller or distributor, to form this value. Duplicates are to be avoided because this value would be used when importing public keys and extending ownership vouchers.</p>
<h4 id="step-13-deploy-for-multiple-key-types">Step 1.3: Deploy for Multiple Key Types<a class="headerlink" href="#step-13-deploy-for-multiple-key-types" title="Permanent link">&para;</a></h4>
<p>If you, as a reseller or distributor, produces both the Rivest–Shamir–Adleman (RSA)- and elliptic-curve cryptography (ECC)-based devices, you will need to support two different key types. However, because of the limitations of the secure key fob (For example, Yubikey*), the deployment of multiple key types requires that multiple secure key fobs, each with one type of key pair, be used. The following figure shows a usage example. </p>
<p><img alt="An Example of Using Two Different Key Types" src="../img/Slide5.PNG" /></p>
<h3 id="step-2-setup-infrastructure">Step 2: Setup Infrastructure<a class="headerlink" href="#step-2-setup-infrastructure" title="Permanent link">&para;</a></h3>
<p>You need to acquire and put into place the following:  </p>
<p>•   A system to host the reseller toolkit and SDO Database<br />
•   Secure key fob(s)  </p>
<p>The following tables list the hardware infrastructure for Linux*- and Windows*-based reseller toolkits, respectively.</p>
<p>Table 1. Linux* OS-based Reseller Toolkit</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Specification</th>
</tr>
</thead>
<tbody>
<tr>
<td>Connectivity</td>
<td>An Ethernet network to connect to the   IoT device.</td>
</tr>
<tr>
<td>Secure Key Fobs</td>
<td>YubiKey* security key (see <a href="https://www.yubico.com/products/yubikey-hardware/">https://www.yubico.com/products/yubikey-hardware/</a>)</td>
</tr>
<tr>
<td>Operating System</td>
<td>Ubuntu* OS version 16.x or 18.x</td>
</tr>
<tr>
<td>Software</td>
<td>· Java* Runtime Environment (JRE) software version 11 Oracle* software (<a href="http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html">http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html</a>) </p>  or  </p> <strong>Open JRE</strong> (<a href="http://openjdk.java.net/install/index.html">http://openjdk.java.net/install/index.html</a>) </p>  · Apache Tomcat* (<a href="http://tomcat.apache.org/">http://tomcat.apache.org/</a>)   software version 8 or later </p>  · MariaDB* (<a href="http://mariadb.org/">http://mariadb.org/</a>) server version 10.4 or   later</td>
</tr>
</tbody>
</table>
<p>Table 2. Windows* OS-based Reseller Toolkit</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Specification</th>
</tr>
</thead>
<tbody>
<tr>
<td>Connectivity</td>
<td>An Ethernet network to connect to the   IoT device.</td>
</tr>
<tr>
<td>Secure Key Fobs</td>
<td>YubiKey* security key (see <a href="https://www.yubico.com/products/yubikey-hardware/">https://www.yubico.com/products/yubikey-hardware/</a>)</td>
</tr>
<tr>
<td>Operating System</td>
<td>Ubuntu* OS version 16.x or 18.x</td>
</tr>
<tr>
<td>Software</td>
<td>· Java* Runtime Environment (JRE) software version 11    <strong>Oracle software</strong> (<a href="http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html">http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html</a>) </p>  or </p>  <strong>Open JRE</strong> (<a href="http://openjdk.java.net/install/index.html">http://openjdk.java.net/install/index.html</a>) </p>  · Apache Tomcat* (<a href="http://tomcat.apache.org/">http://tomcat.apache.org/</a>)   software version 8 or later </p>  · MariaDB* (<a href="http://mariadb.org/">http://mariadb.org/</a>) server version 10.4 or   later</td>
</tr>
</tbody>
</table>
<h3 id="step-3-deploy-database-and-reseller-toolkit">Step 3: Deploy Database and Reseller Toolkit<a class="headerlink" href="#step-3-deploy-database-and-reseller-toolkit" title="Permanent link">&para;</a></h3>
<p>Install the SDO database and toolkit, see <a href="#database-and-toolkit-installation">Database and Toolkit Installation</a>. Be sure to use the secure key fob option for the key storage. </p>
<h3 id="step-4-test">Step 4: Test<a class="headerlink" href="#step-4-test" title="Permanent link">&para;</a></h3>
<p>Import test voucher and public key. Assign voucher to customer. Invoke voucher extension command.</p>
<h2 id="database-and-toolkit-installation">Database and Toolkit Installation<a class="headerlink" href="#database-and-toolkit-installation" title="Permanent link">&para;</a></h2>
<p>You can either use the Docker* script provided or deploy manually.</p>
<h3 id="setup-docker-script">Setup: Docker* Script<a class="headerlink" href="#setup-docker-script" title="Permanent link">&para;</a></h3>
<p>The Docker* script requires a key store file containing the SDO reseller keys. See <a href="../../keystore-guide/">Supply Chain Tools Key Store Setup Guide</a> for details. 
For the remaining setup, follow the instructions in the readme file in the SDO Docker* directory.</p>
<h3 id="setup-manual">Setup: Manual<a class="headerlink" href="#setup-manual" title="Permanent link">&para;</a></h3>
<ol>
<li>For the following steps, run as root or use sudo.</li>
<li>Install the MariaDB* server from https://mariadb.org/.</li>
<li>For each of the following commands, use the ‘root’ user you defined in step 2 where you installed the MariaDB* server, and run each script on the machine where the MariaDB* server is installed. You’ll find the scripts in both the source and binary files of the release.  </li>
<li>Edit the rt_config.sql and mt_config.sql as directed by the comments in each file.</li>
<li>
<p>Run the rt_create.sql script:<br />
<code>mysql -u &lt;username&gt; -p &lt; rt_create.sql</code></p>
</li>
<li>
<p>Run the rt_config.sql script:<br />
<code>mysql -u &lt;username&gt; -p &lt; rt_config.sql</code></p>
</li>
<li>Create a key store containing the SDO reseller keys. See <a href="../../keystore-guide/">Supply Chain Tools Key Store Setup Guide</a> for details.  </li>
<li>Setup and deploy the toolkit web service. If this is an evaluation deployment, you have an option to run the web service directly from the command line. If you choose to do this, instructions are provided in the readme file included with the toolkit software. Follow those instructions. You can verify that the toolkit starts up correctly by looking at the output in the window where you ran the toolkit. Installation is then complete, and you can skip the following steps.
An example if running directly:<br />
<code>java -Dspring.datasource.url="jdbc:mariadb://localhost:3307/sdo" -Dspring.datasource.username=sdo_admin -Dspring.datasource.password=sdo -Dsdo.keystore="file:///sdo.p12" -Dsdo.keystore.password=123456 -jar ./reseller-webapp-1.8.war</code></li>
<li>Install the Apache Tomcat* software from http://tomcat.apache.org/ or equivalent.</li>
<li>Copy the reseller toolkit war file into the Apache Tomcat* webapps directory (on a Linux* machine this would typically be /var/lib/tomcat8/webapps). Rename the war file to ROOT.war.</li>
<li>Start the Apache Tomcat<em> service. This will trigger Apache Tomcat</em> to unpack the war file and create individual files in the webapps/ROOT directory.</li>
<li>
<p>Add the remaining toolkit configuration for the Apache Tomcat* software (see the readme file included with the toolkit software for further details). For Apache Tomcat* version 8 running on the Linux* machine, these settings are located in /var/lib/tomcat/webapps/ROOT/WEB-INF/classes/application.properties. An example is given as follows:<br />
<code>spring.datasource.url=jdbc:mariadb://localhost:3307/sdo?useSSL=false
    spring.datasource.username=sdo_admin
    spring.datasource.password=sdo
    sdo.keystore=file:///var/lib/tomcat8/webapps/ROOT/sdo.p12 
    sdo.keystore.password=123456</code>  </p>
<p><strong><em>Note:</em></strong> The database user and password should match those configured in rt_config.sql. </p>
<ul>
<li>datasource.url: be sure to use localhost rather than the IP address.  </li>
<li>sdo.keystore: this is either the pathname to the software key store (jks) or to the public key cryptography standards (PKCS#11) library if using the secure key fob. Be sure to not use quotes around the value.  </li>
<li>sdo.keystore.password: this is the password for the software key store or the pin code of the secure key fob.  </li>
</ul>
</li>
<li>
<p>Start the Apache Tomcat* service. </p>
</li>
<li>Test with the status page: http://<hostname or ip>/api/v1/status. If the page does not load, look at the Apache Tomcat* logs to debug any errors.</li>
</ol>
<h3 id="setup-troubleshooting">Setup: Troubleshooting<a class="headerlink" href="#setup-troubleshooting" title="Permanent link">&para;</a></h3>
<p>Troubleshoot using the following steps if the toolkit web service does not start correctly:  </p>
<ol>
<li>Verify that the JDBC* string is correct.  </li>
</ol>
<p>An example is: jdbc:mariadb://localhost:3307/sdo. Be sure <strong>mariadb</strong> is included, the port is specified as <strong>3307</strong>, and the host name is correct.  </p>
<ol>
<li>Verify that the database user and password are correct.  </li>
</ol>
<p>The user and password should be the same as those defined in rt_config.sql. You may wish to use some third-party database tool to log into the database to test that the user and password are correct.</p>
<h2 id="usage-scenarios">Usage Scenarios<a class="headerlink" href="#usage-scenarios" title="Permanent link">&para;</a></h2>
<h3 id="import-customer-public-key">Import Customer Public Key<a class="headerlink" href="#import-customer-public-key" title="Permanent link">&para;</a></h3>
<p>Import the customer public key by calling the <strong>rt_add_customer_public_key</strong> stored procedure. In a production environment, the import would likely be invoked programmatically. For test, development, or evaluation purposes, run from the command line as follows:</p>
<pre><code>mysql -u &lt;username&gt; -p -h &lt;SDO database server hostname or ip&gt; -P &lt;server port&gt; -e “use sdo; call rt_add_customer_public key('CUST_DIST_12345', '-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCqGKukO1De7zhZj6+H0qtjTkVxwTCpvKe4eCZ0
FPqri0cb2JZfXJ/DgYSF6vUpwmJG8wVQZKjeGcjDOL5UlsuusFncCzWBQ7RKNUSesmQRMSGkVb1/
3j+skZ6UtW+5u09lHNsj6tQ51s1SPrCBkedbNf0Tp0GbMJDyR4e9T04ZZwIDAQAB
-----END PUBLIC KEY-----’)”
</code></pre>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be sure this is the public key PEM and not the certificate PEM. The public key can be extracted from the certificate with the OpenSSL* toolkit:  </p>
<p><code>openssl x509 -pubkey -noout -in &lt;cert file&gt;.pem &gt; &lt;pubkey&gt;.pem</code></p>
</div>
<h3 id="import-ownership-voucher">Import Ownership Voucher<a class="headerlink" href="#import-ownership-voucher" title="Permanent link">&para;</a></h3>
<p>Import the ownership voucher by calling the rt_add_voucher stored procedure. In a production environment, the import would likely be invoked programmatically. For test, development, or evaluation purposes, run from the command line as follows:</p>
<pre><code>mysql -u &lt;username&gt; -p -h &lt;SDO database server hostname or ip&gt; -P &lt;server port&gt; -e “use sdo; call rt_add_voucher('SN1342599', '{&quot;sz&quot;:0,&quot;oh&quot;:{&quot;pv&quot;:112,&quot;pe&quot;:3,&quot;r&quot;:[2,[4,{&quot;dn&quot;:&quot;localhost&quot;,&quot;only&quot;:&quot;owner&quot;,&quot;pow&quot;:8040,&quot;pr&quot;:&quot;http&quot;}],[4,{&quot;dn&quot;:&quot;localhost&quot;,&quot;only&quot;:&quot;dev&quot;,&quot;po&quot;:8040,&quot;pr&quot;:&quot;http&quot;}]],&quot;g&quot;:&quot;UNqKf+WjRi6sFBXybKASPg==&quot;,&quot;d&quot;:&quot;NOT SET&quot;,&quot;pk&quot;:[1,3,[257,&quot;AL6FIK4LAS+7ppX07aoDwJyD0dCjH0730+7sD/PiqEez9/xlwLJqt0M33/eRclchNoHcAIpZFX8tTzu3gVVaJzp73SO2gnTGwhE7SuVr+nzdYh1HksrItnUgx1uVxA3hnUHXy1J7aiZAS4DLUHsWf6gAdVF2VEZpRYupNLo+X6Xt9sZ2Wxt1oy0C/oSG4O8oY9i2wvTSreclafIYKUP8lJIOQt4MZsbcgJWL1Mr1CEBsZ8xwCJiIdmP292WaV8f3zraCAzyjDS0BVrv/0JGfFSjkPzsK8kajtKUPDVTPRLT67M2K1DkQeZLdj1bbVZdXZo7aGW2X0H3JPOuY+CbO0w8=&quot;,3,&quot;AQAB&quot;]]},&quot;hmac&quot;:[32,108,&quot;PB+PtWcCFRa6nJcGQM3P4JJUUR/hBmWobFBGxjyBdRs=&quot;],&quot;en&quot;:[]}')”
</code></pre>

<h3 id="assign-device-voucher-to-customer">Assign Device (Voucher) to Customer<a class="headerlink" href="#assign-device-voucher-to-customer" title="Permanent link">&para;</a></h3>
<p>Assign the device (voucher) by calling the <strong>rt_assign_device_to_customer</strong> stored procedure. In a production environment, the assignment would likely be invoked programmatically. For test, development, or evaluation purposes, run from the command line as follows:</p>
<pre><code>mysql -u &lt;username&gt; -p -h &lt;SDO database server hostname or ip&gt; -P &lt;server port&gt; -e “use sdo; call rt_assign_device_to_customer(‘SN12345678’, ’CUST_DIST_12345’)”
</code></pre>

<h3 id="extend-ownership-voucher">Extend Ownership Voucher<a class="headerlink" href="#extend-ownership-voucher" title="Permanent link">&para;</a></h3>
<p>Ownership voucher is extended through the REST API. In a production environment, the extension would be done programmatically. For test purposes, you can use curl to invoke the extension:</p>
<pre><code>curl -X GET http://&lt;reseller toolkit ip&gt;:&lt;port&gt;/api/v1/vouchers/&lt;device serial no&gt;
</code></pre>

<p>The result will be the extended voucher.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 Intel Corporation - Released under CC BY 4.0 license</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
