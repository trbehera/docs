<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Secure Device Onboard Contributers">
        <link rel="canonical" href="https://secure-device-onboard.github.io/docs/iot-platform-sdk/development-guide/">
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Development Guide - Secure Device Onboard</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Secure Device Onboard</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../../reference/" class="nav-link">Reference</a>
                            </li>
                            <li class="navitem">
                                <a href="../../community/" class="nav-link">Community</a>
                            </li>
                            <li class="navitem">
                                <a href="../../releases/" class="nav-link">Releases</a>
                            </li>
                            <li class="navitem">
                                <a href="../../security-best-practices/security-best-practices/" class="nav-link">Security Best Practices</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Client SDK <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../client-sdk/client-sdk-reference-guide/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../client-sdk/client-sdk-api-reference/" class="dropdown-item">API Reference</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">IOT Platform SDK <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../running-the-demo/" class="dropdown-item">Running The Demo</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Development Guide</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Rendezvous Service <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../rendezvous-service/introduction/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Supply Chain Tools <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../supply-chain-tools/manufacturing/manufacturer-enablement-guide/" class="dropdown-item">Manufacturing Tools</a>
</li>
                                    
<li>
    <a href="../../supply-chain-tools/reseller/reseller-enablement-guide/" class="dropdown-item">Reseller Tools</a>
</li>
                                    
<li>
    <a href="../../supply-chain-tools/keystore-guide/" class="dropdown-item">Keystore Guide</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Protocol Reference Implementation <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../protocol-reference-implementation/introduction/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">All-in-one Demo <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../all-in-one-demo/introduction/" class="dropdown-item">Introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Protocol Specification <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../protocol-specification/introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/protocol-description/" class="dropdown-item">Protocol Description</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/protocol-data-types/" class="dropdown-item">Protocol Data Types</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/data-transmission-persistence/" class="dropdown-item">Data Transmission & Persistence</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/detailed-protocol-description/" class="dropdown-item">Detailed Protocol Description</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/resale-protocol/" class="dropdown-item">Resale Protocol</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/credential-reuse-protocol/" class="dropdown-item">Credential Reuse Protocol</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/appendix-b-device-provisioning-with-ecdsa/" class="dropdown-item">Appendix B - Device Provisioning with ECDSA</a>
</li>
                                    
<li>
    <a href="../../protocol-specification/appendix-c-secure-device-onboard-1-1-crypto-upgrade/" class="dropdown-item">Appendix C - Secure Device Onboard 1.1 Crypto Upgrade</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../running-the-demo/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../rendezvous-service/introduction/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#rest-contracts-between-ocs-server-and-opsto0scheduler-client" class="nav-link">Rest Contracts between OCS (server) and OPS/To0Scheduler (client)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#rest-contracts-between-to0scheduler-server-and-ocs-client" class="nav-link">Rest Contracts between To0Scheduler (server) and OCS (client)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#message-types" class="nav-link">Message Types</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p>The IOT Platform SDK consists of Owner Companion Service (OCS) that can be implemented to integrate any other device management solution.</p>
<p>Both the OPS and To0Scheduler are bound to the OCS by a set of pre-defined REST contracts, as specified in the module <code>libocs</code>, that can be implemented to perform certain pre-defined tasks. Each REST API must carry out only the corresponding task, and must accept/return only the corresponding Message Type object.</p>
<p>The implementation of these REST contracts in an OCS can be done in any programming language. A sample java-based reference implementation of OCS is provided by the module <code>ocsfs</code> that uses file-system as database. As such, both OPS and To0Scheduler will work out-of-the-box with any implementation of OCS that supports the pre-defined REST contracts.</p>
<h2 id="rest-contracts-between-ocs-server-and-opsto0scheduler-client">Rest Contracts between OCS (server) and OPS/To0Scheduler (client)<a class="headerlink" href="#rest-contracts-between-ocs-server-and-opsto0scheduler-client" title="Permanent link">&para;</a></h2>
<p>Following are the pre-defined REST API specifications for all the resource paths that must be implemented and exposed by an OCS implementation. Both, OPS and To0Scheduler makes requests to the OCS implementation, as clients, using this format.</p>
<table>
<thead>
<tr>
<th align="right">Operation</th>
<th align="center">Description</th>
<th align="center">Path/Query Parameters</th>
<th align="center">Request Body</th>
<th align="right">Response Body</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><code>GET</code> /v1/devices/{deviceId}/voucher</td>
<td align="center">Get the ownership voucher corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right">OwnerVoucher</td>
</tr>
<tr>
<td align="right"><code>POST</code> /v1/devices/voucher</td>
<td align="center">Store the ownership voucher.</td>
<td align="center"></td>
<td align="center">OwnerVoucher</td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>GET</code> /v1/devices/{deviceId}/state</td>
<td align="center">Get the state information corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right">DeviceState</td>
</tr>
<tr>
<td align="right"><code>POST</code> /v1/devices/{deviceId}/state</td>
<td align="center">Store the state information corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center">DeviceState</td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>GET</code> /v1/devices/{deviceId}/msgs</td>
<td align="center">Get service info array corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right">[SviMessage]</td>
</tr>
<tr>
<td align="right"><code>POST</code> /v1/devices/{deviceId}/msgs</td>
<td align="center">Store service info array corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center">[SviMessage]</td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>PUT</code> /v1/devices/{deviceId}/msgs</td>
<td align="center">Store module message info corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center">ModuleMessage</td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>DELETE</code> /v1/devices/{deviceId}/msgs</td>
<td align="center">Delete service info array corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>GET</code> /v1/devices/{deviceId}/psi</td>
<td align="center">Get module message array corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right">[ModuleMessage]</td>
</tr>
<tr>
<td align="right"><code>GET</code> /v1/ devices/{deviceId}/values/{valueId}</td>
<td align="center">Get the serviceinfo value corresponding to the <code>valueId</code> for the device identified by <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier, <code>valueId</code>: Serviceinfo resource identifier <br> Query <code>start</code>: start index, <code>end</code>: end index</td>
<td align="center"></td>
<td align="right">Byte Array</td>
</tr>
<tr>
<td align="right"><code>PUT</code> /v1/ devices/{deviceId}/values/{valueId}</td>
<td align="center">Store the serviceinfo value corresponding to the <code>valueId</code> for the device identified by <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier, <code>valueId</code>: Serviceinfo resource identifier</td>
<td align="center"></td>
<td align="right">Byte Array</td>
</tr>
<tr>
<td align="right"><code>DELETE</code> /v1/ devices/{deviceId}/values/{valueId}</td>
<td align="center">Delete the serviceinfo value corresponding to the <code>valueId</code> for the device identified by <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier, <code>valueId</code>: Serviceinfo resource identifier</td>
<td align="center"></td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>GET</code> /v1/devices/{deviceId}/setupinfo</td>
<td align="center">Get new setup information corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right">SetupInfoResponse</td>
</tr>
<tr>
<td align="right"><code>POST</code> /v1/devices/{deviceId}/errors</td>
<td align="center">Store the error information corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center">DeviceState</td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>POST</code> /v1/signatures/{deviceId}</td>
<td align="center">Generate signature of input data and return it along with associated info, corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right">String</td>
</tr>
<tr>
<td align="right"><code>POST</code> /v1/ciphers/{deviceId}</td>
<td align="center">Perform the <code>operation</code> and return data corresponding to the .</td>
<td align="center">Path: <code>deviceId</code>: Device identifier; Query: <code>operation</code>: encipher/decipher</td>
<td align="center">Byte Array</td>
<td align="right">Byte Array</td>
</tr>
<tr>
<td align="right"><code>DELETE</code> /devices/{deviceId}/blob</td>
<td align="center">Delete the <code>deviceId</code> along with all the associated data.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>GET</code> /v1/devices/{deviceId}/sessioninfo</td>
<td align="center">Get the TO2 session info corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right">To2DeviceSessionInfo</td>
</tr>
<tr>
<td align="right"><code>POST</code> /v1/devices/{deviceId}/sessioninfo</td>
<td align="center">Update the TO2 session info corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center">To2DeviceSessionInfo</td>
<td align="right"></td>
</tr>
<tr>
<td align="right"><code>DELETE</code> /v1/devices/{deviceId}/sessioninfo</td>
<td align="center">Delete the TO2 session info corresponding to the <code>deviceId</code>.</td>
<td align="center">Path: <code>deviceId</code>: Device identifier</td>
<td align="center"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
<h2 id="rest-contracts-between-to0scheduler-server-and-ocs-client">Rest Contracts between To0Scheduler (server) and OCS (client)<a class="headerlink" href="#rest-contracts-between-to0scheduler-server-and-ocs-client" title="Permanent link">&para;</a></h2>
<p>An OCS implementation must, also, acta as a client to trigger TO0 for set of devices, by making the following request to To0Scheduler. To0Scheduler accepts the request from OCS to initiate TO0 for the list of devices.</p>
<table>
<thead>
<tr>
<th align="right">Operation</th>
<th align="center">Description</th>
<th align="center">Path/Query Parameters</th>
<th align="center">Request Body</th>
<th align="right">Response Body</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><code>POST</code> /v1/to0/devices</td>
<td align="center">Trigger TO0 for an array of devices.</td>
<td align="center"></td>
<td align="center">To0Request</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<h2 id="message-types">Message Types<a class="headerlink" href="#message-types" title="Permanent link">&para;</a></h2>
<p>Following is a list of message types that are sent in the message body of each request/response. Each message type follows the standard JSON* schema. Statements after '#' inside the JavaScript Object Notation (JSON), represents the purpose of the field.</p>
<h3 id="devicestate">DeviceState<a class="headerlink" href="#devicestate" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the state information of the device.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;to2Error&quot;: ProtocolError Object,    # TO2 failure information
  &quot;to2Timestamp&quot;: String,              # Successful TO2 completion time
  &quot;g3&quot;: String,                        # Device Identifier/GUID
  &quot;to0Error&quot;: String,                  # TO0 failure information
  &quot;to0Timestamp&quot;: String,              # Successful TO0 completion time
  &quot;to0Ws&quot;: Integer,                    # Number of seconds for which last successul TO0 is valid.
  &quot;to2State&quot;: String                   # TO2 state
}
</code></pre>

<p>Every field is optional.</p>
<h3 id="protocolerror"><em>ProtocolError</em><a class="headerlink" href="#protocolerror" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the device's error information that occurred during execution of the protocol.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;ec&quot;: Integer,    # Error code
  &quot;emsg&quot;: Integer,  # Message ID
  &quot;em&quot;: String      # Error message
}
</code></pre>

<h3 id="modulemessage"><em>ModuleMessage</em><a class="headerlink" href="#modulemessage" title="Permanent link">&para;</a></h3>
<p>This JSON* structure contains the key-value pairs for a particular module name. It is used to store, both, the device's serviceinfo, and the owner's pre-serviceinfo.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;module&quot;: String,    # module name
  &quot;msg&quot;: String,       # (pre-)serviceinfo key
  &quot;value&quot;:  String     # (pre-)serviceinfo value
}
</code></pre>

<h3 id="svimessage"><em>SviMessage</em><a class="headerlink" href="#svimessage" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents information about the owner service info.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;module&quot;:  String,     # Module name
  &quot;msg&quot;: String,         # Message to be sent
  &quot;valueLen&quot;: Integer,   # Length of the value of the message
  &quot;valueId&quot;: String,     # Key to use when retrieving the serviceinfo value
  &quot;enc&quot;: String          # Encoding expected to use when sending the value
}
</code></pre>

<h3 id="setupinforesponse"><em>SetupInfoResponse</em><a class="headerlink" href="#setupinforesponse" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the new Device identifier and the Rendezvous information.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;g3&quot;: String,                             # New device identifier/GUID
  &quot;r3&quot;: [
          RendezvousInstruction Object      # Array of RendezvousInstruction objects
        ]
}
</code></pre>

<h3 id="rendezvousinstruction"><em>RendezvousInstruction</em><a class="headerlink" href="#rendezvousinstruction" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the rendezvous information. Please refer to the <a href="../../protocol-specification/protocol-data-types/#rendezvousinfo">RendezvousInfo</a> to know about these values.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;only&quot;: String,
  &quot;ip&quot;: String,
  &quot;po&quot;: Integer,
  &quot;pow&quot;: Integer,
  &quot;dn&quot;: String,
  &quot;sch&quot;: String,
  &quot;cch&quot;: String,
  &quot;ui&quot;: Integer,
  &quot;ss&quot;: String,
  &quot;pw&quot;: String,
  &quot;wsp&quot;: String,
  &quot;me&quot;: String,
  &quot;pr&quot;: String,
  &quot;delaysec&quot;: Integer
}
</code></pre>

<h3 id="signatureresponse"><em>SignatureResponse</em><a class="headerlink" href="#signatureresponse" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the response to the signature operation.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;sg&quot;: String,    # Base-64 encoded signature information
  &quot;pk&quot;: String,    # Base-64 encode public key information that can verify the signature
  &quot;alg&quot;: String    # Algorithm of the public key
}
</code></pre>

<h3 id="ownervoucher"><em>OwnerVoucher</em><a class="headerlink" href="#ownervoucher" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the Ownership voucher of the device. Please refer to the <a href="../../protocol-specification/detailed-protocol-description/#pmownershipproxy-type-3">Ownership Voucher</a> about the structure.</p>
<h3 id="message41store"><em>Message41Store</em><a class="headerlink" href="#message41store" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the information from Secure Device Onboard protocol's request <a href="../../protocol-specification/detailed-protocol-description/#to2hellodevice-type-40">TO2.HelloDevice, Type 40</a> and its subsequent response <a href="../../protocol-specification/detailed-protocol-description/#to2proveophdr-type-41">TO2.ProveOPHdr, Type 41</a>. This information is stored as a part of TO2 session information per device.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;n6&quot;: String,                  # Nonce n6
  &quot;kx&quot;: String,                  # Key exchange information
  &quot;ownershipVoucher&quot;: String,    # ownership voucher
  &quot;cs&quot;: String,                  # cipher suite
  &quot;kxEcdhPublicKey&quot;: String,     # Public key being used for ECDH key exchange
  &quot;kxEcdhPrivateKey&quot;: String,    # Private key being used for ECDH key exchange
  &quot;kxEcdhRandom&quot;: String,        # Random being used for ECDH key exchange
  &quot;kxDhPublicKey&quot;: String,       # Public key being used for DH key exchange
  &quot;kxDhPrivateKey&quot;: String,      # Public key being used for DH key exchange
  &quot;asymRandom&quot;: String           # Random being used for Asymmetric key exchange
}
</code></pre>

<h3 id="message45store"><em>Message45Store</em><a class="headerlink" href="#message45store" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the information from Secure Device Onboard protocol's request <a href="../../protocol-specification/detailed-protocol-description/#to2provedevice-type-44">TO2.ProveDevice, Type 44</a> and its subsequent response <a href="../../protocol-specification/detailed-protocol-description/#to2getnextdeviceserviceinfo-type-45">TO2.GetNextDeviceServiceInfo, Type 45</a>. This information is stored as a part of TO2 session information per device.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;n7&quot;: String,    # Nonce n7
  &quot;nn&quot;: Integer,   # Total number of serviceinfo
  &quot;xb&quot;: String     # Second part of key-exchange
}
</code></pre>

<h3 id="message47store"><em>Message47Store</em><a class="headerlink" href="#message47store" title="Permanent link">&para;</a></h3>
<p>This JSON* structure contains the new ownership voucher information, temporarily, until till the end of TO2 protocol, created during response generation of <a href="../../protocol-specification/detailed-protocol-description/#to2setupdevice-type-47">TO2.SetupDevice, Type 47</a>. This information is stored as a part of TO2 session information per device.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;newOwnershipVoucher&quot;: String    # the new ownership voucher structure without hmac
}
</code></pre>

<h3 id="devicecryptoinfo"><em>DeviceCryptoInfo</em><a class="headerlink" href="#devicecryptoinfo" title="Permanent link">&para;</a></h3>
<p>This JSON* structure contains the nonce and counter of the Initialization Vector for the Secure Device Onboard TO2 cipher mode of operation.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;ctrNonce&quot;: String,    # Nonce used for CTR mode
  &quot;ctrCounter&quot;: Long     # Counter value used for CTR mode
}
</code></pre>

<h3 id="to2devicesessioninfo"><em>To2DeviceSessionInfo</em><a class="headerlink" href="#to2devicesessioninfo" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the complete TO2 session information. It's a combination of multiple structures, where each structure is either null or contains values. If any of the structure is null, OCS treats the structure as non-updatable in its store, while OPS considers the same to be an erroneous case. If any of the structure contains appropriate information, OCS overrides the current content with the new content, while OPS processes the content during TO2 protocol execution.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;messsage41Store&quot;: Message41Store Object,
  &quot;messsage45Store&quot;: Message45Store Object,
  &quot;messsage47Store&quot;: Message47Store Object,
  &quot;deviceCryptoInfo&quot;: DeviceCryptoInfo Object
}
</code></pre>

<h3 id="to0request"><em>To0Request</em><a class="headerlink" href="#to0request" title="Permanent link">&para;</a></h3>
<p>This JSON* structure represents the request message that is sent from the OCS to schedule an array of devices for TO0.</p>
<p><em>Message Body:</em></p>
<pre><code>{
  &quot;guids&quot;: [
             String            # Array of Device Identifiers/GUID
           ],
  &quot;waitSeconds&quot;: String        # Suggested number of seconds for which TO0 will be valid
}
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 Intel Corporation - Released under CC BY 4.0 license</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
